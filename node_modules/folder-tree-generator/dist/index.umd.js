#!/usr/bin/env node
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("chalk"),require("commander"),require("fs"),require("update-notifier"),require("path")):"function"==typeof define&&define.amd?define(["exports","chalk","commander","fs","update-notifier","path"],r):r((e||self).folderTreeGenerator={},e.chalk,e.commander,e.fs,e.updateNotifier,e.path)}(this,function(e,r,t,o,n,i){function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(t){if("default"!==t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}}),r.default=e,r}var l=/*#__PURE__*/a(r),c=/*#__PURE__*/f(o),s=/*#__PURE__*/a(n),u=/*#__PURE__*/f(i),d="1.1.6",p=function e(r,t,o,n,i){for(var a in void 0===o&&(o=[]),void 0===n&&(n=0),r){var f=a,l=r[f],c=Array.isArray(l),s="string"==typeof l,u=c,d=Array.isArray(r)&&[].concat(r).pop(),p=!c&&d===l,y=c&&!l.length,g=(Array.isArray(i)&&[].concat(i).pop())===r&&y,h=t.comments&&y&&!t.folderOnly?" # Empty folder":"",m=t.emojis?s?"üìÑ ":"üìÅ ":"",v=s?l:Array.isArray(r)?null:f,b=Array.from({length:n},function(){return"‚îÇ   "}).join("");null!==v&&o.push(b+((g||p)&&n?"‚îî‚îÄ‚îÄ ":"‚îú‚îÄ‚îÄ ")+m+v+h),"object"==typeof l&&e(l,t,o,u?n+1:n,r)}return o.join("\n")},y=function e(r){var t=[];return r.filter(function(r){if("object"==typeof r)return r[Object.keys(r)[0]]=e(r[Object.keys(r)[0]]),!0}).sort(function(e,r){var t=Object.keys(e)[0],o=Object.keys(r)[0];return t<o?-1:t>o?1:0}).forEach(function(e){return t.push(e)}),r.filter(function(e){return"string"==typeof e}).sort().forEach(function(e){return t.push(e)}),t},g=function e(r,t){var o,n;void 0===t&&(t={}),t.ignore=[].concat([".vscode",".DS_Store",".git","node_modules","dist","coverage",".husky"],t.ignore&&t.ignore||[]);var i=u.basename(r);if(!c.lstatSync(r).isDirectory())return i;var a=c.readdirSync(r);if(null!=(o=t.ignore)&&o.length){var f=t.ignore.map(function(e){try{return new RegExp(e)}catch(r){throw Error(" ‚úó Incorrect Regexp: "+l.default.yellow("'"+e+"'")+" ")}});a=a.filter(function(e){return f.every(function(r){return!r.test(""+e)})})}var s=a.length?a.reduce(function(o,n){return o[i]=c.lstatSync(r+"/"+n).isDirectory()?[].concat(o[i]||[],[e(r+"/"+n,t)]).filter(Boolean):o[i]=Array.apply(void 0,t.folderOnly?o[i]||[]:(o[i]||[]).concat([n])),o},{}):((n={})[i]=[],n);return t.sort&&(s[i]=y(s[i])),s};if(process.argv.slice(2).length){t.program.version(d).option("-d, --directory [dir]","Directory path",process.cwd()).option("-f, --folder-only","Draw folders only").option("-s, --sort","Sort alphabetically and put folders first and then files").option("-c, --comments",'Show "Empty folder" comment (--folder-only must be false)').option("-e, --export [path]",'Set the folder path to export "ftg_tree_[date].txt" or just -e or --export for the default export to the current path').option("-i, --ignore [regex]",'Regex list to ignore folders and/or files (separated by commas) - eg: "example($|/.*),index.ts"').option("--emojis","Show emojis - folder: üìÅ - File: üìÑ").parse(process.argv);var h=t.program.opts();try{if(c.lstatSync(h.directory),h.ignore){if("string"!=typeof h.ignore)throw Error(l.default.bgRed.bold("‚úó Missing regex list"));h.ignore=h.ignore.split(",").map(function(e){return e.trim()})}var m=g(h.directory,h);if("object"==typeof m){var v=p(m,h);console.log(l.default.green("--- TREE FROM TERMINAL ---\n")),console.log(v),console.log(l.default.green("\n--------------------------")),h.export&&(h.export="string"!=typeof h.export?h.directory:h.export,c.writeFile(h.export+"/ftg_tree_"+(new Date).toISOString()+".txt",v,function(e){if(e)throw Error;console.log("\n "+l.default.green("FTG Tree has been exported into")+" "+l.default.yellow(h.export))}))}s.default({pkg:{name:"folder-tree-generator",version:d},shouldNotifyInNpmScript:!0,updateCheckInterval:0}).notify({isGlobal:!0})}catch(e){e instanceof Error&&console.log(l.default.bgRed.bold(" "+e.message+" "))}}e.drawTreeFromJsonDir=p,e.ftg=function(e,r){void 0===r&&(r={});try{var t=g(e,r);return"object"==typeof t?p(t,r):t}catch(e){return void(e instanceof Error&&console.log(l.default.bgRed.bold(" "+e.message+" ")))}},e.parseDirToJson=g,e.sortFolder=y});
//# sourceMappingURL=index.umd.js.map
